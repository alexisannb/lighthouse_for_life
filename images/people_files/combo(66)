YUI.add("hermes-template-partner-account-modal",function(e,t){var a=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,t,a,n,r){return'<div>\n\tWith the launch of the new att.net homepage on June 30, 2017, you will need to change the primary email address you use to sign into your Flickr/Yahoo account. Your data and photos on Flickr will not be deleted or modified in any way. You will need to complete this process before June 30, 2017 in order to continue accessing your Flickr account.\n\t<br/><br/>\n\t<a href="/partner-account">Click here to learn more about these changes.</a>\n\t<br/><br/>\n\t<a href="/account/transfer">\n\t\t<button class="update-email">Update your email address</button>\n\t</a>\n</div>\n'},useData:!0}),n={};e.Array.each([],function(t){var a=e.Template.get("hermes/"+t);a&&(n[t]=a)}),e.Template.register("hermes/partner-account-modal",function(t,r){return r=r||{},r.partials=r.partials?e.merge(n,r.partials):n,a(t,r)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("partner-account-banner-view",function(e,t){e.FlickrView.create(this.name,e.FlickrView,[],{buildContainer:function(){return this.setContainerWithTemplate("partner-account-banner"),this},activate:function(){var n=this.get("container").one(".learn-more");return n&&this.registerEventHandler(n.on("click",this.openModal.bind(this))),e.AnchorRepositioner.addOffset(t,this.get("container")),this},openModal:function(){new e.Views.FluidModal({title:"The way you sign in to Flickr is changing",htmlMessage:this.templates("partner-account-modal")({}),appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!0,showCancelX:!0,showCancelButton:!1,showActionButton:!1,hideModalOverlay:!1,showFooter:!1}).show()},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})},"@VERSION@",{requires:["flickr-view","hermes-template-partner-account-banner","hermes-template-partner-account-modal"]});YUI.add("hermes-template-featured-toast",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,t,s){return'<div class="featured-toast">\n\t'+e.escapeExpression((r.renderTrustedMarkup||a&&a.renderTrustedMarkup||r.helperMissing).call(null!=a?a:{},null!=a?a.htmlContent:a,{name:"renderTrustedMarkup",hash:{},data:s}))+"\n</div>\n"},useData:!0}),t={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(t[a]=r)}),e.Template.register("hermes/featured-toast",function(a,s){return s=s||{},s.partials=s.partials?e.merge(t,s.partials):t,r(a,s)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("featured-toast-view",function(t){t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.config=t.featuredToastConfig||{},this.config.id=this.config.id||"",this.config.htmlContent=this.config.htmlContent||"",this.config.showOnActivate=void 0!==this.config.showOnActivate&&this.config.showOnActivate,this.config.classList=this.config.classList||[]},loadState:function(){return t.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("featured-toast",{htmlContent:this.config.htmlContent,classList:this.config.classList})},activate:function(){var i=this,n=this.get("container");this.contentContainer=n.one(".featured-toast"),this.initialClasses=Array.prototype.slice.call(this.contentContainer.getDOMNode().classList),this.updateClasses(),this.setupEvents(),this.config.showOnActivate&&setTimeout(function(){i.show()},0),setTimeout(function(){i.applyBannerOffset()},100),this.registerEventHandler(t.on("resize",t.betterThrottle(this.applyBannerOffset.bind(this),500,this,!0))),this.fire("activated")},show:function(){this.get("container").addClass("activated")},dismiss:function(){var t=this.get("container");t.setStyle("bottom",null),t.removeClass("activated")},handlePrimaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("primaryActionClicked",{clickEvent:t})},handleSecondaryActionClick:function(t){t.preventDefault(),t.stopPropagation(),this.fire("secondaryActionClicked",{clickEvent:t})},applyBannerOffset:function(){var i,n=t.one(".footer-banner-view .footer-container");n&&(i=n.get("clientHeight"),this.get("container").setStyle("bottom",i))},setup:function(t){this.config.htmlContent=t.htmlContent||"",this.config.classList=t.classList||[],this.contentContainer.set("innerHTML",this.config.htmlContent),this.updateClasses(),this.setupEvents()},updateClasses:function(){var t=this;this.contentContainer.set("className",""),this.initialClasses.forEach(function(i){t.contentContainer.addClass(i)}),this.config.classList.forEach(function(i){t.contentContainer.addClass(i)})},setupEvents:function(){var t=this.get("container"),i=t.one(".primary-action"),n=t.one(".secondary-action");i&&i.on("click",this.handlePrimaryActionClick.bind(this)),n&&n.on("click",this.handleSecondaryActionClick.bind(this))}})},"@VERSION@",{requires:["flickr-view","hermes-template-featured-toast"]});YUI.add("photo-prints-helper",function(e,r){var t=require("url-parse"),i=require("hermes-core/flog")(r),n=require("superagent"),s=e.mix({langBundles:["prints"]},e.Localizable),o={default:"prints.SOMETHING_WRONG_PREPARING_PRINT",4:"prints.UNSUPPORTED_FILE_TYPE_PLEASE_JPG"};e.PhotoPrintsHelper=function(r){var a=e.config.flickr.flickrprints.devBaseUrl,l=e.config.flickr.flickrprints.baseUrl,p=e.config.flickr.flickrprints.cartPath,c=e.config.flickr.flickrprints.devApiKey,u=e.config.flickr.flickrprints.apiKey;return{isPrintsEnabled:function(){return r.flipper.isFlipped("enable-photo-prints")&&(r.getViewer().signedIn||!r.getViewer().signedIn&&r.flipper.isFlipped("enable-others-to-print"))},canPrintPhoto:function(e){return this.isPrintsEnabled()&&!e.getValue("isVideo")&&(e.getValue("isOwner")||r.flipper.isFlipped("enable-others-to-print")&&!e.getValue("isOwner")&&e.getValue("engagement").getValue("canPrint"))},registerPrint:function(t,i){var n=this;return r.callAPI("flickr.printservice.getRedirectURL",{user_id:t.getValue("owner").getValue("id"),photo_id:t.getValue("id"),return_url:i}).then(function(r){return n.isPrintUrlSafe(r.redirectURL)?{redirectURL:r.redirectURL}:e.Promise.reject({message:n.getRegisterPrintErrorCodeMessage()})}).catch(function(e){throw{message:n.getRegisterPrintErrorCodeMessage(e.code)}})},isPrintUrlSafe:function(e){var r=new t(e);return"https:"===r.protocol&&"https://"+r.hostname===this.getBaseUrl()},getBaseUrl:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?l:a},getApiKey:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?u:c},getCartUrl:function(){return this.getBaseUrl()+p},fetchCartCount:function(){var e=this.getBaseUrl()+"/api/v2/cart?APIKey="+this.getApiKey();return n.get(e).withCredentials().set("Accept","application/json").then(function(e){return{count:e&&e.body.Response.Cart?e.body.Response.Cart.ItemCount:0}}).catch(function(e){throw i.error("Error fetching cart count",{err:e}),e})},fetchOrder:function(e){var r=this.getBaseUrl()+"/api/v2/order/"+e+"?_expand=OrderBillingAddress&APIKey="+this.getApiKey();return n.get(r).withCredentials().set("Accept","application/json").then(function(r){var t="/api/v2/order/"+e+"!billingaddress",i=r.body.Response.Order,n=r.body.Expansions[t];return{orderId:i.OrderID,orderUrl:i.WebUri,email:n.OrderBillingAddress.Email}})},getRegisterPrintErrorCodeMessage:function(e){var r=e?e.toString():"";return o.hasOwnProperty(r)?s.intlMessage({intlName:o[r]}):s.intlMessage({intlName:o.default})}}}},"@VERSION@",{requires:[]});YUI.add("math-helper",function(e){e.MathHelper=function(e){return{seedRandom:function(e){return 0+1*((e=(9301*e+49297)%233280)/233280)}}}},"@VERSION@",{requires:[]});YUI.add("hermes-template-trustarc-consent",function(e,a){var r=e.Template.Handlebars.revive({compiler:[7,">= 4.0.0"],main:function(e,a,r,t,n){return'<div id="consent_blackbar"></div>'},useData:!0}),t={};e.Array.each([],function(a){var r=e.Template.get("hermes/"+a);r&&(t[a]=r)}),e.Template.register("hermes/trustarc-consent",function(a,n){return n=n||{},n.partials=n.partials?e.merge(t,n.partials):t,r(a,n)})},"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("trustarc-consent-manager-view",function(e,t){require("hermes-core/flog")(t);e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this},loadState:function(){return this},buildContainer:function(){return this.setContainerWithTemplate("trustarc-consent"),this},activate:function(){return this.waitForTrustArc(),this},destructor:function(){clearTimeout(this.checkTrustModalTimeout)},trustArcMangerInteractionTest:function(e){var t=JSON.parse(e.data);if(console.log("Does PrivacyManager Exist in the json object??"),t&&(t.PrivacyManagerAPI||t.PrivacyManagerAPI))switch(console.log("PrivacyManager does exist in the json object!!"),console.log("JSON OBJECT: ",t),t.PrivacyManagerAPI.consent){case"denied":console.log("Consent Denied!!");break;case"approved":console.log("Consent Approved!!")}else console.log("PrivacyManager does NOT exist in the json object!!"),console.log("JSON OBJECT: ",t)},checkManagerInteraction:function(t){var n;if(t&&t.data){this.appContext.flipper.isFlipped("enable-cookie-consent-trustarc-testing")&&(console.log("Checking event data as specified by TrustArc Documents!!"),this.trustArcMangerInteractionTest(t));try{n=JSON.parse(t.data)}catch(e){return}n&&"preference_manager"===n.source&&("cm_loading"===n.message?this.checkIfConsentManagerIsOpen():"submit_preferences"===n.message&&n.data?(this.appContext.flipper.isFlipped("enable-cookie-consent-trustarc-testing")&&(console.log("This is how we are currently using the consent manager we are checking the 'json.message' key of the json object, and then determining whether or not it equals 'submit_preferences' and if 'json.data' exists, to determine the consent given"),console.log("JSON MESSAGE: ",n.message,"JSON DATA: ",n.data)),this.appContext.cookieCatcher.handleConsentManagerChoice(n.data)):"remove_iframe"===n.message&&n.data&&e.config.win.location.reload())}},waitForTrustArc:function(){"truste"in window&&"PrivacyManagerAPI"in window?(clearTimeout(this.waitForTrustTimeout),this.appContext.flipper.isFlipped("enable-cookie-consent-trustarc-testing")&&console.log("HERE WE ARE SETTING THE EVENT LISTENER!!"),e.config.win.addEventListener("message",this.checkManagerInteraction.bind(this)),this.appContext.flipper.isFlipped("enable-cookie-consent-trustarc-testing")&&console.log("EVENT LISTENER SET!!")):this.waitForTrustTimeout=setTimeout(this.waitForTrustArc.bind(this),250)},checkIfConsentManagerIsOpen:function(){if(document.querySelector(".truste_overlay"))this.checkTrustModalTimeout=setTimeout(this.checkIfConsentManagerIsOpen.bind(this),250);else{var t=this.get("container").one("#consent_blackbar").getDOMNode(),n=t.offsetHeight||t.clientHeight,i=t.offsetWidth||t.clientWidth;clearTimeout(this.checkTrustModalTimeout),(!n&&!i||0===n&&0===i)&&e.config.win.location.reload()}}})},"@VERSION@",{requires:["promise","hermes-template-trustarc-consent"],langBundles:["common","groups","feed"]});